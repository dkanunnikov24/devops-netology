# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?



>В Linux: ip link
>
>vagrant@vagrant:~$ ifconfig
>   eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500  
>            inet 10.0.2.15  netmask 255.255.255.0  broadcast 10.0.2.255  
>            inet6 fe80::a00:27ff:fe73:60cf  prefixlen 64  scopeid 0x20<link>  
>            ether 08:00:27:73:60:cf  txqueuelen 1000  (Ethernet)  
>            RX packets 95585  bytes 16772279 (16.7 MB)  
>            RX errors 0  dropped 0  overruns 0  frame 0  
>            TX packets 110084  bytes 9622242 (9.6 MB)  
>            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0  
>            
>   lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536  
>            inet 127.0.0.1  netmask 255.0.0.0  
>            inet6 ::1  prefixlen 128  scopeid 0x10<host>  
>            loop  txqueuelen 1000  (Local Loopback)  
>            RX packets 987  bytes 91273 (91.2 KB)  
>            RX errors 0  dropped 0  overruns 0  frame 0  
>            TX packets 987  bytes 91273 (91.2 KB)  
>            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0`  
>
>
>В Windows: ipconfig
>
>
>C:\Users\Дмитрий>ipconfig  
>  
>Настройка протокола IP для Windows  
>  
>Адаптер беспроводной локальной сети Подключение по локальной сети* 1:  
>  
>   Состояние среды. . . . . . . . : Среда передачи недоступна.  
>   DNS-суффикс подключения . . . . . :  
>  
>Адаптер беспроводной локальной сети Подключение по локальной сети* 2:  
>  
>   Состояние среды. . . . . . . . : Среда передачи недоступна.  
>   DNS-суффикс подключения . . . . . :  
>  
>Адаптер беспроводной локальной сети Беспроводная сеть:  
>  
>   DNS-суффикс подключения . . . . . : Dlink  
>   IPv6-адрес. . . . . . . . . . . . : fd01::64ed:7d3b:d0f:7dee  
>   Временный IPv6-адрес. . . . . . . : fd01::c178:3108:e13f:7e9d  
>   Локальный IPv6-адрес канала . . . : fe80::64ed:7d3b:d0f:7dee%16  
>   IPv4-адрес. . . . . . . . . . . . : 192.168.0.108  
>   Маска подсети . . . . . . . . . . : 255.255.255.0   
>   Основной шлюз. . . . . . . . . : fe80::3e1e:4ff:fe4f:81e2%16  
>                                       192.168.0.1  
>  
>Адаптер Ethernet Сетевое подключение Bluetooth:  
>  
>   Состояние среды. . . . . . . . : Среда передачи недоступна.  
>   DNS-суффикс подключения . . . . .   

2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

LLDP – протокол для обмена информацией между соседними устройствами.  
 
>  Пакет lldpd  
 
    `vagrant@vagrant:~$ lldpctl
    -------------------------------------------------------------------------------
    LLDP neighbors:
    -------------------------------------------------------------------------------`
 

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.
 
 
>для разделения на несколько виртуальных сетей используется, позволяющая делить физическую на логические сегменты на 2-м уровне OSI.  
>Для управления виртуальными сетями используется утилита vlan из пакета vlan
>
>Пример конфига из помощи:  
> 
>##
>The following example encapsulates incoming ICMP packets on eth0 from 10.0.0.2 into VLAN ID 123:  
>
>              #tc qdisc add dev eth0 handle ffff: ingress
>              #tc filter add dev eth0 parent ffff: pref 11 protocol ip \
>                   u32 match ip protocol 1 0xff flowid 1:1 \
>                       match ip src 10.0.0.2 flowid 1:1 \
>                  action vlan push id 123
>##
4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

###
>Типы агрегации (объединения) интерфейсов в Linux
>mode=0 (balance-rr)
>Этот режим используется по-умолчанию, если в настройках не указано другое. balance-rr обеспечивает балансировку нагрузки и отказоустойчивость. В данном режиме >пакеты отправляются "по кругу" от первого интерфейса к последнему и сначала. Если выходит из строя один из интерфейсов, пакеты отправляются на остальные >оставшиеся.При подключении портов к разным коммутаторам, требует их настройки.
>
>mode=1 (active-backup)
>При active-backup один интерфейс работает в активном режиме, остальные в ожидающем. Если активный падает, управление передается одному из ожидающих. Не требует >поддержки данной функциональности от коммутатора.
>
>mode=2 (balance-xor)
>Передача пакетов распределяется между объединенными интерфейсами по формуле ((MAC-адрес источника) XOR (MAC-адрес получателя)) % число интерфейсов. Один и тот же >интерфейс работает с определённым получателем. Режим даёт балансировку нагрузки и отказоустойчивость.
>
>mode=3 (broadcast)
>Происходит передача во все объединенные интерфейсы, обеспечивая отказоустойчивость.
>
>mode=4 (802.3ad)
>Это динамическое объединение портов. В данном режиме можно получить значительное увеличение пропускной способности как входящего так и исходящего трафика, >используя все объединенные интерфейсы. Требует поддержки режима от коммутатора, а так же (иногда) дополнительную настройку коммутатора.
>
>mode=5 (balance-tlb)
>Адаптивная балансировка нагрузки. При balance-tlb входящий трафик получается только активным интерфейсом, исходящий - распределяется в зависимости от текущей >загрузки каждого интерфейса. Обеспечивается отказоустойчивость и распределение нагрузки исходящего трафика. Не требует специальной поддержки коммутатора.
>
>mode=6 (balance-alb)
>Адаптивная балансировка нагрузки (более совершенная). Обеспечивает балансировку нагрузки как исходящего (TLB, transmit load balancing), так и входящего трафика (для IPv4 через ARP). Не требует специальной поддержки коммутатором, но требует возможности изменять MAC-адрес устройства.
###
 
5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.
 
>По сети 10.10.10.0/29 с помощью ipcalc определяем что:  
>
>us@ubuntu:~$ ipcalc 10.10.10.0/29  
>Address:   10.10.10.0           00001010.00001010.00001010.00000 000  
>Netmask:   255.255.255.248 = 29 11111111.11111111.11111111.11111 000  
>Wildcard:  0.0.0.7              00000000.00000000.00000000.00000 111  
>=>  
>Network:   10.10.10.0/29        00001010.00001010.00001010.00000 000  
>HostMin:   10.10.10.1           00001010.00001010.00001010.00000 001  
>HostMax:   10.10.10.6           00001010.00001010.00001010.00000 110  
>Broadcast: 10.10.10.7           00001010.00001010.00001010.00000 111  
>Hosts/Net: 6                     Class A, Private Internet  
>В этой подсети 8 адресов, включая адрес подсети и бродкаст. На хосты остается 6 адресов.  
>  
>Посмотрим на 10.10.10.0/24:  
>  
>us@ubuntu:~$ ipcalc 10.10.10.0/24  
>Address:   10.10.10.0           00001010.00001010.00001010. 00000000  
>Netmask:   255.255.255.0 = 24   11111111.11111111.11111111. 00000000  
>Wildcard:  0.0.0.255            00000000.00000000.00000000. 11111111  
>=>  
>Network:   10.10.10.0/24        00001010.00001010.00001010. 00000000  
>HostMin:   10.10.10.1           00001010.00001010.00001010. 00000001  
>HostMax:   10.10.10.254         00001010.00001010.00001010. 11111110  
>Broadcast: 10.10.10.255         00001010.00001010.00001010. 11111111  
>Hosts/Net: 254                   Class A, Private Internet  
>В /24 подсети 256 адресов, значит, подсеть 10.10.10.0/24 можно разделить на 32 подсети 10.10.10.0/29 Подсети будут такими: Network: 10.10.10.0/29 Network:   >10.10.10.8/29  
>Network: 10.10.10.16/29 и т.д. до Network: 10.10.10.248/29   
   

6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.
 
>Используем диапазон 100.64.0.0 — 100.127.255.255  
>  
>Вариант 1  
>  
>    `vagrant@vagrant:~$ ipcalc -b --split 40 50 100.64.0.0/26  
>    Address:   100.64.0.0  
>    Netmask:   255.255.255.192 = 26  
>    Wildcard:  0.0.0.63  
>    =>  
>    Network:   100.64.0.0/26  
>    HostMin:   100.64.0.1  
>    HostMax:   100.64.0.62  
>    Broadcast: 100.64.0.63  
>    Hosts/Net: 62                    Class A  
>  
>    1. Requested size: 40 hosts  
>    Netmask:   255.255.255.192 = 26  
>    Network:   100.64.0.0/26  
>    HostMin:   100.64.0.1  
>    HostMax:   100.64.0.62  
>    Broadcast: 100.64.0.63  
>    Hosts/Net: 62                    Class A  
>  
>    2. Requested size: 50 hosts  
>    Netmask:   255.255.255.192 = 26  
>    Network:   100.64.0.64/26  
>    HostMin:   100.64.0.65  
>    HostMax:   100.64.0.126  
>    Broadcast: 100.64.0.127  
>    Hosts/Net: 62                    Class A  
>  
>    Network is too small  
>    Needed size:  128 addresses.  
>    Used network: 100.64.0.0/25  
>    Unused:`  
>Вариант 2  
>  
>    `vagrant@vagrant:~$ ipcalc -b --split 40 50 100.64.0.0/25  
>    Address:   100.64.0.0  
>    Netmask:   255.255.255.128 = 25  
>    Wildcard:  0.0.0.127  
>    =>  
>    Network:   100.64.0.0/25  
>    HostMin:   100.64.0.1  
>    HostMax:   100.64.0.126  
>    Broadcast: 100.64.0.127  
>    Hosts/Net: 126                   Class A  
>  
>    1. Requested size: 40 hosts  
>    Netmask:   255.255.255.192 = 26  
>    Network:   100.64.0.0/26  
>    HostMin:   100.64.0.1  
>    HostMax:   100.64.0.62  
>    Broadcast: 100.64.0.63  
>    Hosts/Net: 62                    Class A  
>  
>    2. Requested size: 50 hosts  
>    Netmask:   255.255.255.192 = 26  
>    Network:   100.64.0.64/26  
>    HostMin:   100.64.0.65  
>    HostMax:   100.64.0.126  
>    Broadcast: 100.64.0.127  
>    Hosts/Net: 62                    Class A  
>  
>    Needed size:  128 addresses.  
>    Used network: 100.64.0.0/25  
>    Unused:`   
 


7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

> в Windows:  
>   
> arp -a  
>  
>Интерфейс: 192.168.0.108 --- 0x10  
>  адрес в Интернете      Физический адрес      Тип  
>  192.168.0.1           3c-1e-04-4f-81-e2     динамический  
>  192.168.0.255         ff-ff-ff-ff-ff-ff     статический  
>  224.0.0.2             01-00-5e-00-00-02     статический  
>  224.0.0.251           01-00-5e-00-00-fb     статический  
>  224.0.0.252           01-00-5e-00-00-fc     статический  
>  228.8.8.8             01-00-5e-08-08-08     статический  
>  239.192.152.143       01-00-5e-40-98-8f     статический  
>  239.255.255.250       01-00-5e-7f-ff-fa     статический  
>  255.255.255.255       ff-ff-ff-ff-ff-ff     статический  
>   
> Для удаления используется опция -d - arp -d ip.  
>  
>Для удаления всех записей используется опция -d *.  
>  
>Для очистки кеша netsh interface ip delete arpcache  
> 
> В Linux:  
>   
> arp -v или ip neighbour  
>   
>[root@bitrixservice ~]# arp -v  
>Address                  HWtype  HWaddress           Flags Mask            Iface  
>169.254.169.254          ether   46:86:33:34:4e:7f   C                     eth0  
>296466-dison.tmweb.ru    ether   1e:8c:10:8c:9c:b6   C                     eth0  
>vds-ce36326.timeweb.ru   ether   0c:59:9c:bc:9b:70   C                     eth0  
>Entries: 3      Skipped: 0      Found: 3  
>  
>Для удаления используется опция -d - arp -d 10.0.2.3.  
>  
>Очистка кеша: ip link set arp off dev eth0  
>  
>Заполнение таблицы ARP: ip link set arp on dev eth0  
>  
  
 ---
## Задание для самостоятельной отработки (необязательно к выполнению)

 8*. Установите эмулятор EVE-ng.
 
 Инструкция по установке - https://github.com/svmyasnikov/eve-ng

 Выполните задания на lldp, vlan, bonding в эмуляторе EVE-ng. 
 
 ---

## Как сдавать задания

Обязательными к выполнению являются задачи без указания звездочки. Их выполнение необходимо для получения зачета и диплома о профессиональной переподготовке.

Задачи со звездочкой (*) являются дополнительными задачами и/или задачами повышенной сложности. Они не являются обязательными к выполнению, но помогут вам глубже понять тему.

Домашнее задание выполните в файле readme.md в github репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Также вы можете выполнить задание в [Google Docs](https://docs.google.com/document/u/0/?tgif=d) и отправить в личном кабинете на проверку ссылку на ваш документ.
Название файла Google Docs должно содержать номер лекции и фамилию студента. Пример названия: "1.1. Введение в DevOps — Сусанна Алиева".

Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Перед тем как выслать ссылку, убедитесь, что ее содержимое не является приватным (открыто на комментирование всем, у кого есть ссылка), иначе преподаватель не сможет проверить работу. Чтобы это проверить, откройте ссылку в браузере в режиме инкогнито.

[Как предоставить доступ к файлам и папкам на Google Диске](https://support.google.com/docs/answer/2494822?hl=ru&co=GENIE.Platform%3DDesktop)

[Как запустить chrome в режиме инкогнито ](https://support.google.com/chrome/answer/95464?co=GENIE.Platform%3DDesktop&hl=ru)

[Как запустить  Safari в режиме инкогнито ](https://support.apple.com/ru-ru/guide/safari/ibrw1069/mac)

Любые вопросы по решению задач задавайте в чате учебной группы.

---
